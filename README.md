# Az2SE
تغییرات ایجاد شده در بخش سوم:

| دیف | محل اعمال تغییرات (کلاس/واسط) | عنوان تغییر | شرحی کوتاه از تغییر |
|-----|-------------------------------|------------------------------|----------------------------------------------------------------------------------------------------------------------|
| ۱   | PaymentStrategy               | ایجاد اینترفیس `PaymentStrategy` | این اینترفیس ایجاد شده تا برای هر نوع روش پرداخت یک استراتژی خاص تعریف شود که شامل `OnlineOrderStrategy`، `OnSiteOrderStrategy` و `PhoneOrderStrategy` است. |
| ۲   | Main                          | تقسیم وظایف در کلاس `Main` | وظایف دریافت سفارش و انتخاب روش پرداخت به کلاس‌های جداگانه `OrderProcessor` و `PaymentMethodSelector` منتقل شده‌اند. این کار باعث شده تا کلاس `Main` تنها وظیفه هماهنگی بین این بخش‌ها را داشته باشد. |
| ۳   | OnSiteOrderService            | حذف متدهای اضافی | متدهای بدون استفاده حذف شده‌اند و این کلاس تنها متدهایی را پیاده‌سازی می‌کند که به آن نیاز دارد. |
| ۴   | OnlineOrderService            | حذف متدهای اضافی | متدهای بدون استفاده حذف شده‌اند و این کلاس تنها متدهایی را پیاده‌سازی می‌کند که به آن نیاز دارد. |
| ۵   | PhoneOrderService             | حذف متدهای اضافی | متدهای بدون استفاده حذف شده‌اند و این کلاس تنها متدهایی را پیاده‌سازی می‌کند که به آن نیاز دارد. |
| ۶   | Order                         | تغییر مسیر و حذف `getTotalPrice` و `toString` | این کلاس به پکیج `OrderHandlers` اضافه شده و دو تابع `toString` و `getTotalPrice` از آن حذف شده‌اند. |
| ۷   | Food                          | تغییر مسیر | این کلاس به پکیج `OrderHandlers` اضافه شده است. |
| ۸   | OrderTotalPriceCalculator     | ایجاد این کلاس | این کلاس به پکیج `OrderHandlers` اضافه شده و وظیفه محاسبه مجموع قیمت سفارش را بر عهده دارد. |
| ۹   | OrderFormatter                | ایجاد این کلاس و افزودن تابع `format` | این کلاس سینگلتون به پکیج `OrderHandlers` اضافه شده و تابع `format` پیاده‌سازی شده است که یک `Order` و یک `OrderTotalPriceCalculator` به عنوان ورودی دریافت کرده و سفارش را چاپ می‌کند. |

پاسخ بخش چهارم:
برای پاسخ به بخش چهارم آزمایش، ابتدا به بررسی تغییراتی که در جدول گام 1 ثبت شده‌اند، پرداخته و بررسی می‌کنیم که کدام یک از این تغییرات با اعمال اصول SOLID و تغییرات اعمال‌شده در گام‌های 2 و 3 دیگر نیاز به انجام ندارند.

### جدول تغییرات گام 1
| ردیف | محل اعمال تغییرات (کلاس/واسط) | عنوان تغییر                                   | شرحی کوتاه از تغییر                                                                                                               |
|------|----------------------------------|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------|
| 1    | PhoneOrderService                | کلاس جدید برای سفارش از با موبایل             | در این کلاس جدید 6 تابع وجود دارد و 4 تا از این کلاس‌ها خالی هستند اما به دلیل اینکه از واسط OrderService استفاده شده است باید وجود می‌داشتند. 2 کلاس دیگر نیز برای ثبت سفارش و پرداخت آن با استفاده از موبایل است. |
| 2    | Main                             | افزودن یک if و else برای زمانی که روش ثبت سفارش به صورت موبایلی باشد | در ادامه شرط در هنگام انتخاب روش ثبت، if و else قرار می‌گیرد و در ادامه آن orderService برابر با new PhoneOrderService قرار می‌گیرد و پس از آن سفارش به نام آن مشتری ثبت می‌شود.                                 |
| 3    | Main                             | افزودن یک if و else برای زمانی که روش پرداخت سفارش به صورت موبایلی باشد | پس از if و else و مشخص شدن روش پرداخت، تابع PhoneOrderPayment صدا زده می‌شود و به آن مبلغ قابل پرداخت داده می‌شود.                                                   |
| 4    | OrderService                     | ایجاد دو تابع جدید برای روش پرداخت با موبایل | برای زمانی که روش پرداخت و ثبت سفارش از طریق موبایل است باید دو تابع اضافه می‌شد.                                                                                      |
| 5    | OnSiteOrderService               | ایجاد دو تابع جدید به دلیل implement واسط OrderService | به دلیل اینکه از واسط OrderService استفاده شده است، نیاز است که توابع کلاس PhoneOrderService که اضافه شدند به صورت خالی در این کلاس نیز وجود داشته باشند.                                           |
| 6    | OnlineOrderService               | ایجاد دو تابع جدید به دلیل implement واسط OrderService | به دلیل اینکه از واسط OrderService استفاده شده است، نیاز است که توابع کلاس PhoneOrderService که اضافه شدند به صورت خالی در این کلاس نیز وجود داشته باشند.                                           |

### تغییرات مورد نیاز با اصول SOLID
با توجه به اصول SOLID و تغییراتی که در گام‌های 2 و 3 اعمال شد:

1. **ایجاد اینترفیس `PaymentStrategy`**: 
   - کلاس‌های `PhoneOrderService`، `OnSiteOrderService`، و `OnlineOrderService` به جای پیاده‌سازی واسط `OrderService` از `PaymentStrategy` استفاده می‌کنند.
   - متدهای خالی دیگر نیازی به پیاده‌سازی در این کلاس‌ها ندارند.

2. **تقسیم وظایف در کلاس `Main`**:
   - وظایف دریافت سفارش و انتخاب روش پرداخت به کلاس‌های جداگانه منتقل شدند.
   - `Main` تنها وظیفه هماهنگی بین این بخش‌ها را دارد.

### بررسی تغییرات مورد نیاز
با توجه به توضیحات بالا، تغییرات زیر دیگر نیاز به انجام ندارند:

1. **PhoneOrderService**: ایجاد 6 تابع (4 تابع خالی و 2 تابع برای ثبت سفارش و پرداخت).
2. **OnSiteOrderService**: ایجاد دو تابع خالی.
3. **OnlineOrderService**: ایجاد دو تابع خالی.
4. **OrderService**: ایجاد دو تابع جدید برای روش پرداخت با موبایل.

### تغییرات باقی‌مانده
تنها تغییراتی که باقی می‌مانند مربوط به افزودن if و else در کلاس `Main` برای انتخاب روش ثبت سفارش و پرداخت به صورت موبایلی است.

### جدول نهایی تغییرات باقی‌مانده
| ردیف | محل اعمال تغییرات (کلاس/واسط) | عنوان تغییر                                   | شرحی کوتاه از تغییر                                                                                                               |
|------|----------------------------------|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------|
| 1    | Main                             | افزودن یک if و else برای زمانی که روش ثبت سفارش به صورت موبایلی باشد | در ادامه شرط در هنگام انتخاب روش ثبت، if و else قرار می‌گیرد و در ادامه آن orderService برابر با new PhoneOrderService قرار می‌گیرد و پس از آن سفارش به نام آن مشتری ثبت می‌شود.                                 |
| 2    | Main                             | افزودن یک if و else برای زمانی که روش پرداخت سفارش به صورت موبایلی باشد | پس از if و else و مشخص شدن روش پرداخت، تابع PhoneOrderPayment صدا زده می‌شود و به آن مبلغ قابل پرداخت داده می‌شود.                                                   |

### نتیجه‌گیری
پس از اعمال تغییرات مطابق با اصول SOLID، از انجام 4 تغییر ثبت‌شده در جدول گام 1 معاف خواهید شد. تعداد تغییرات مورد نیاز تنها 2 تغییر خواهد بود.

### تعداد تغییرات مورد نیاز: 2
